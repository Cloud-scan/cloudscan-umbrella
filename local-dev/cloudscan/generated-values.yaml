global:
  # DO NOT set imageRegistry globally - it affects Bitnami charts
  # Set registry per-service instead
  imagePullPolicy: Always
  imageVersion: latest
  storageClass: standard
  environment: development
  logLevel: info

  # PostgreSQL configuration
  postgres:
    host: cloudscan-postgres-postgresql.cloudscan.svc.cluster.local
    port: 5432
    user: cloudscan
    password: cloudscan123
    sslmode: disable

  # Redis configuration
  redis:
    host: cloudscan-redis-master
    port: 6379
    authEnabled: true
    password: redis123
    secure: false

  # MinIO/S3 storage configuration
  storage:
    type: minio
    s3:
      endpoint: cloudscan-minio:9000
      bucket: cloudscan-artifacts
      region: us-east-1
      accessKey: admin
      secretKey: changeme123
      useSSL: false

# On-premise dependencies
onPrem:
  postgresql: false  # Using external PostgreSQL
  redis: true
  minio: true

# PostgreSQL (external - managed separately)
postgresql:
  enabled: false

# Redis
redis:
  enabled: true
  image:
    registry: registry-1.docker.io
    repository: bitnamilegacy/redis
    tag: "8.2.1-debian-12-r0"
  sentinel:
    image:
      registry: registry-1.docker.io
      repository: bitnamilegacy/redis-sentinel
      tag: "8.2.1-debian-12-r0"
  metrics:
    enabled: true
    image:
      registry: registry-1.docker.io
      repository: bitnamilegacy/redis-exporter
      tag: "1.76.0-debian-12-r0"
  volumePermissions:
    image:
      registry: registry-1.docker.io
      repository: bitnamilegacy/os-shell
      tag: "12-debian-12-r51"
  auth:
    enabled: true
    password: redis123
  tls:
    enabled: false
  master:
    persistence:
      enabled: false

# MinIO
minio:
  enabled: true
  mode: standalone
  image:
    registry: registry-1.docker.io
    repository: bitnamilegacy/minio
    tag: "2025.7.23-debian-12-r3"
  clientImage:
    registry: registry-1.docker.io
    repository: bitnamilegacy/minio-client
    tag: "2025.7.21-debian-12-r2"
  defaultInitContainers:
    volumePermissions:
      image:
        registry: registry-1.docker.io
        repository: bitnamilegacy/os-shell
        tag: "12-debian-12-r51"
  console:
    image:
      registry: registry-1.docker.io
      repository: bitnamilegacy/minio-object-browser
      tag: "2.0.2-debian-12-r3"
  auth:
    rootUser: admin
    rootPassword: changeme123
  defaultBuckets: cloudscan-artifacts
  persistence:
    enabled: true
    size: 10Gi

orchestrator:
  enabled: true
  image:
    registry: docker.io/mahiop123
    repository: cloudscan-orchestrator
    tag: latest
    pullPolicy: Always
  replicaCount: 1
  postgres:
    database: orchestrator
    maxConns: 25
    minConns: 5
  migration:
    enabled: true
    logLevel: INFO
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

apiGateway:
  enabled: true
  image:
    registry: docker.io/mahiop123
    repository: cloudscan-api-gateway
    tag: latest
    pullPolicy: Always
  replicaCount: 1
  postgres:
    database: cloudscan_gateway
    maxConns: 25
    minConns: 5
  migration:
    enabled: true
    logLevel: INFO
  jwt:
    secret: changeme-jwt-secret-key-please-change-in-production
    expirationHours: 24
  rateLimit:
    enabled: true
    requestsPerMinute: 60
  grpc:
    orchestratorTimeout: 30s
    orchestratorTLS: false
    storageTimeout: 30s
    storageTLS: false
  cors:
    allowedOrigins: "*"
    allowedMethods: "GET,POST,PUT,DELETE,OPTIONS"
    allowedHeaders: "Origin,Content-Type,Accept,Authorization"
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

storage:
  enabled: true
  image:
    registry: docker.io/mahiop123
    repository: cloudscan-storage
    tag: latest
    pullPolicy: Always
  replicaCount: 1
  storageType: minio
  defaultExpirationHours: 24
  postgres:
    database: storage
    maxConns: 25
    minConns: 5
  migration:
    enabled: true
    logLevel: INFO
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

websocket:
  enabled: true
  image:
    registry: docker.io/mahiop123
    repository: cloudscan-websocket
    tag: latest
    pullPolicy: Always
  replicaCount: 1
  service:
    port: 9090
    httpPort: 8083
  cors:
    allowedOrigins: "*"
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

ui:
  enabled: true
  image:
    registry: docker.io/mahiop123
    repository: cloudscan-ui
    tag: latest
    pullPolicy: Always
  replicaCount: 1
  postgres:
    database: ui_backend
  frontend:
    apiUrl: /api
    wsUrl: /ws
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "250m"

runner:
  enabled: true
  image:
    registry: docker.io/mahiop123
    repository: cloudscan-runner
    tag: latest
    pullPolicy: Always
  resources:
    requests:
      cpu: 2000m
      memory: 4Gi
    limits:
      cpu: 4000m
      memory: 8Gi
  job:
    ttlSecondsAfterFinished: 3600
    backoffLimit: 1
    activeDeadlineSeconds: 3600

ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "100m"
  hosts:
    - host: cloudscan.local
      paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: cloudscan-ui
              port: 8080
        - path: /api
          pathType: Prefix
          backend:
            service:
              name: cloudscan-api-gateway
              port: 8080
        - path: /ws
          pathType: Prefix
          backend:
            service:
              name: cloudscan-websocket
              port: 9090
  tls:
    - secretName: cloudscan-tls
      hosts:
        - cloudscan.local

monitoring:
  enabled: true
  serviceMonitor:
    enabled: false
